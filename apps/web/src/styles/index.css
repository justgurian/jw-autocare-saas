@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   BAYFILLER — PREMIUM GARAGE DESIGN SYSTEM
   CSS Custom Properties + Dark Mode
   ============================================ */

@layer base {
  :root {
    /* Page surfaces */
    --color-background: 252 248 240;
    --color-foreground: 26 54 93;
    --color-surface: 255 253 249;
    --color-surface-alt: 248 244 236;

    /* Brand colors (space-separated RGB for Tailwind alpha support) */
    --color-retro-red: 197 48 48;
    --color-retro-teal: 44 122 123;
    --color-retro-mustard: 214 158 46;
    --color-retro-navy: 26 54 93;
    --color-retro-cream: 252 248 240;
    --color-retro-mint: 154 230 180;
    --color-retro-pink: 254 215 226;
    --color-retro-orange: 221 107 32;
    --color-retro-brown: 116 66 16;
    --color-retro-chrome: 160 174 192;

    /* Semantic colors */
    --color-accent: 197 48 48;
    --color-accent-hover: 185 28 28;
    --color-secondary: 44 122 123;
    --color-secondary-hover: 15 118 110;
    --color-highlight: 214 158 46;

    /* Text */
    --color-text-primary: 26 54 93;
    --color-text-secondary: 107 114 128;
    --color-text-muted: 156 163 175;

    /* Borders */
    --color-border: 0 0 0;
    --color-border-muted: 209 213 219;
    --border-width: 1px;

    /* Shadows (modern, not offset) */
    --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.08);
    --shadow-md: 0 2px 8px -1px rgb(0 0 0 / 0.1), 0 1px 3px -1px rgb(0 0 0 / 0.08);
    --shadow-lg: 0 4px 16px -2px rgb(0 0 0 / 0.12), 0 2px 6px -2px rgb(0 0 0 / 0.06);
    --shadow-card: 0 2px 8px -1px rgb(0 0 0 / 0.1);

    /* Sidebar */
    --color-sidebar-bg: 26 54 93;
    --color-sidebar-text: 255 255 255;
    --color-sidebar-active: 197 48 48;
    --color-sidebar-border: 0 0 0;

    /* Scrollbar */
    --color-scrollbar-track: 229 231 235;
    --color-scrollbar-thumb: 26 54 93;

    /* Radius */
    --radius-sm: 4px;
    --radius-md: 8px;
    --radius-lg: 12px;

    /* shadcn/ui compatibility aliases */
    --background: var(--color-background);
    --foreground: var(--color-foreground);
    --card: var(--color-surface);
    --card-foreground: var(--color-text-primary);
    --primary: var(--color-accent);
    --primary-foreground: 255 255 255;
    --secondary: var(--color-surface-alt);
    --secondary-foreground: var(--color-text-primary);
    --muted: var(--color-surface-alt);
    --muted-foreground: var(--color-text-secondary);
    --accent: var(--color-highlight);
    --accent-foreground: var(--color-foreground);
    --destructive: 239 68 68;
    --destructive-foreground: 255 255 255;
    --border: var(--color-border-muted);
    --input: var(--color-border-muted);
    --ring: var(--color-accent);
    --radius: var(--radius-md);
  }

  .dark {
    /* Page surfaces */
    --color-background: 24 24 27;
    --color-foreground: 250 250 250;
    --color-surface: 39 39 42;
    --color-surface-alt: 52 52 56;

    /* Brand colors — brightened for dark mode contrast */
    --color-retro-red: 239 68 68;
    --color-retro-teal: 45 212 191;
    --color-retro-mustard: 251 191 36;
    --color-retro-navy: 30 41 59;
    --color-retro-cream: 39 39 42;
    --color-retro-mint: 52 211 153;
    --color-retro-pink: 251 113 133;
    --color-retro-orange: 251 146 60;
    --color-retro-brown: 180 83 9;
    --color-retro-chrome: 148 163 184;

    /* Semantic colors */
    --color-accent: 239 68 68;
    --color-accent-hover: 248 113 113;
    --color-secondary: 45 212 191;
    --color-secondary-hover: 94 234 212;
    --color-highlight: 251 191 36;

    /* Text */
    --color-text-primary: 250 250 250;
    --color-text-secondary: 161 161 170;
    --color-text-muted: 113 113 122;

    /* Borders */
    --color-border: 63 63 70;
    --color-border-muted: 52 52 56;

    /* Shadows */
    --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.3);
    --shadow-md: 0 2px 8px -1px rgb(0 0 0 / 0.4), 0 1px 3px -1px rgb(0 0 0 / 0.3);
    --shadow-lg: 0 4px 16px -2px rgb(0 0 0 / 0.5), 0 2px 6px -2px rgb(0 0 0 / 0.3);
    --shadow-card: 0 2px 8px -1px rgb(0 0 0 / 0.4);

    /* Sidebar */
    --color-sidebar-bg: 15 15 20;
    --color-sidebar-text: 250 250 250;
    --color-sidebar-active: 239 68 68;
    --color-sidebar-border: 63 63 70;

    /* Scrollbar */
    --color-scrollbar-track: 39 39 42;
    --color-scrollbar-thumb: 82 82 91;

    /* shadcn dark aliases */
    --destructive: 220 38 38;
    --destructive-foreground: 255 255 255;
  }

  /* Dark mode overrides for inline Tailwind classes */
  .dark .border-black {
    border-color: rgb(var(--color-border));
  }
  .dark .bg-white {
    background-color: rgb(var(--color-surface));
  }
  .dark .bg-gray-50 {
    background-color: rgb(var(--color-surface-alt));
  }
  .dark .bg-gray-100 {
    background-color: rgb(var(--color-surface-alt));
  }
  .dark .bg-gray-200 {
    background-color: rgb(63 63 70);
  }
  .dark .text-gray-500 {
    color: rgb(var(--color-text-secondary));
  }
  .dark .text-gray-600 {
    color: rgb(var(--color-text-secondary));
  }
  .dark .text-gray-400 {
    color: rgb(var(--color-text-muted));
  }
  .dark .border-gray-200 {
    border-color: rgb(var(--color-border));
  }
  .dark .border-gray-300 {
    border-color: rgb(var(--color-border));
  }

  html {
    font-family: 'Source Sans Pro', -apple-system, BlinkMacSystemFont, sans-serif;
  }

  body {
    background-color: rgb(var(--color-background));
    color: rgb(var(--color-foreground));
    @apply antialiased;
  }

  h1, h2, h3, h4, h5, h6 {
    font-family: 'Oswald', 'Franklin Gothic Medium', sans-serif;
    @apply font-bold tracking-tight;
  }
}

/* ============================================
   COMPONENT CLASSES — Premium Garage Edition
   ============================================ */

@layer components {
  /* Retro Button — elevated with subtle lift on hover */
  .btn-retro {
    @apply px-6 py-3 font-heading font-bold uppercase tracking-wide;
    @apply transition-all duration-200 ease-out;
    border: var(--border-width) solid rgb(var(--color-border));
    box-shadow: var(--shadow-sm);
    border-radius: var(--radius-sm);
  }
  .btn-retro:hover {
    @apply -translate-y-0.5;
    box-shadow: var(--shadow-md);
  }
  .btn-retro:active {
    @apply translate-y-0;
    box-shadow: var(--shadow-sm);
  }

  .btn-retro-primary {
    @apply btn-retro text-white;
    background-color: rgb(var(--color-accent));
  }
  .btn-retro-primary:hover {
    background-color: rgb(var(--color-accent-hover));
  }

  .btn-retro-secondary {
    @apply btn-retro text-white;
    background-color: rgb(var(--color-secondary));
  }
  .btn-retro-secondary:hover {
    background-color: rgb(var(--color-secondary-hover));
  }

  .btn-retro-outline {
    @apply btn-retro;
    background-color: transparent;
    color: rgb(var(--color-foreground));
  }
  .btn-retro-outline:hover {
    background-color: rgb(var(--color-foreground));
    @apply text-white;
  }

  /* Retro Card — refined with modern shadow */
  .card-retro {
    background-color: rgb(var(--color-surface));
    border: var(--border-width) solid rgb(var(--color-border));
    box-shadow: var(--shadow-card);
    border-radius: var(--radius-md);
    @apply p-6;
    @apply transition-shadow duration-200 ease-out;
  }
  .card-retro:hover {
    box-shadow: var(--shadow-lg);
  }

  /* Retro Input */
  .input-retro {
    @apply w-full px-4 py-3;
    background-color: rgb(var(--color-surface));
    border: var(--border-width) solid rgb(var(--color-border));
    color: rgb(var(--color-text-primary));
    border-radius: var(--radius-sm);
    @apply font-body;
    @apply focus:outline-none focus:ring-2 focus:border-transparent;
    --tw-ring-color: rgb(var(--color-accent));
  }
  .input-retro::placeholder {
    color: rgb(var(--color-text-muted));
  }

  /* Retro Select */
  .select-retro {
    @apply input-retro appearance-none cursor-pointer;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='currentColor'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
    background-position: right 12px center;
    background-repeat: no-repeat;
    background-size: 20px;
    padding-right: 40px;
  }

  /* Retro Badge */
  .badge-retro {
    @apply inline-flex items-center px-3 py-1;
    @apply text-xs font-heading font-bold uppercase tracking-wider;
    border: var(--border-width) solid rgb(var(--color-border));
    border-radius: var(--radius-sm);
  }

  /* Retro Heading Styles */
  .heading-retro {
    @apply font-heading text-4xl md:text-5xl uppercase tracking-wider;
    color: rgb(var(--color-foreground));
  }

  .subheading-retro {
    @apply font-heading text-xl md:text-2xl uppercase tracking-wide;
    color: rgb(var(--color-secondary));
  }

  /* Retro Divider */
  .divider-retro {
    border-bottom: 2px solid rgb(var(--color-border));
    @apply my-6;
  }

  /* Checkerboard Background */
  .bg-checkerboard {
    background-image:
      linear-gradient(45deg, rgb(var(--color-border) / 0.05) 25%, transparent 25%),
      linear-gradient(-45deg, rgb(var(--color-border) / 0.05) 25%, transparent 25%),
      linear-gradient(45deg, transparent 75%, rgb(var(--color-border) / 0.05) 75%),
      linear-gradient(-45deg, transparent 75%, rgb(var(--color-border) / 0.05) 75%);
    background-size: 20px 20px;
    background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
  }

  /* Neon Glow Effect */
  .neon-glow {
    text-shadow:
      0 0 5px currentColor,
      0 0 10px currentColor,
      0 0 20px currentColor,
      0 0 40px currentColor;
  }

  /* Vintage Paper Texture */
  .paper-texture {
    background-color: rgb(var(--color-retro-cream));
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='4' viewBox='0 0 4 4'%3E%3Cpath fill='%239C92AC' fill-opacity='0.05' d='M1 3h1v1H1V3zm2-2h1v1H3V1z'%3E%3C/path%3E%3C/svg%3E");
  }

  /* Chrome Gradient (for premium elements) */
  .chrome-gradient {
    background: linear-gradient(135deg, #f5f5f5 0%, #d4d4d4 50%, #f5f5f5 100%);
  }

  /* Retro Progress Bar */
  .progress-retro {
    @apply h-6;
    background-color: rgb(var(--color-surface-alt));
    border: var(--border-width) solid rgb(var(--color-border));
    border-radius: var(--radius-sm);
  }

  .progress-retro-fill {
    @apply h-full;
    background-color: rgb(var(--color-secondary));
    @apply transition-all duration-300 ease-out;
    border-radius: var(--radius-sm);
  }

  /* Retro Toggle */
  .toggle-retro {
    @apply relative w-14 h-8;
    background-color: rgb(var(--color-surface-alt));
    border: var(--border-width) solid rgb(var(--color-border));
    border-radius: var(--radius-lg);
    @apply cursor-pointer transition-colors;
  }

  .toggle-retro.active {
    background-color: rgb(var(--color-secondary));
  }

  .toggle-retro::after {
    content: '';
    @apply absolute top-1 left-1 w-5 h-5;
    background-color: rgb(var(--color-surface));
    border: var(--border-width) solid rgb(var(--color-border));
    border-radius: 50%;
    @apply transition-transform;
  }

  .toggle-retro.active::after {
    @apply translate-x-6;
  }

  /* Retro Tooltip */
  .tooltip-retro {
    @apply absolute z-50 px-3 py-2;
    background-color: rgb(var(--color-foreground));
    @apply text-white text-sm;
    border: var(--border-width) solid rgb(var(--color-border));
    box-shadow: var(--shadow-md);
    border-radius: var(--radius-sm);
    @apply opacity-0 invisible transition-all;
  }

  .tooltip-retro.show {
    @apply opacity-100 visible;
  }
}

/* ============================================
   MOBILE-FIRST OPTIMIZATIONS
   ============================================ */

@layer components {
  /* Mobile-optimized touch targets (44px minimum) */
  .touch-target {
    @apply min-h-[44px] min-w-[44px];
    @apply flex items-center justify-center;
  }

  /* Mobile-friendly buttons */
  .btn-mobile {
    @apply min-h-[48px] px-6 py-3;
    @apply text-base font-medium;
    @apply active:scale-95 transition-transform;
  }

  /* Large action button for mobile */
  .btn-action-lg {
    @apply min-h-[56px] px-8 py-4;
    @apply text-lg font-bold uppercase tracking-wide;
  }

  /* Mobile card with better padding */
  .card-mobile {
    @apply p-4 sm:p-6;
  }

  /* Mobile-optimized form fields */
  .input-mobile {
    @apply min-h-[48px] px-4 py-3;
    @apply text-base;
  }

  /* Mobile navigation item */
  .nav-item-mobile {
    @apply min-h-[48px] px-4 py-3;
    @apply flex items-center gap-3;
    @apply active:bg-black/10;
  }

  /* Swipeable container */
  .swipe-container {
    @apply flex overflow-x-auto snap-x snap-mandatory;
    @apply -mx-4 px-4;
    scrollbar-width: none;
    -webkit-overflow-scrolling: touch;
  }

  .swipe-container::-webkit-scrollbar {
    display: none;
  }

  .swipe-item {
    @apply flex-shrink-0 snap-center;
  }

  /* Bottom action bar for mobile */
  .bottom-action-bar {
    @apply fixed bottom-0 left-0 right-0;
    background-color: rgb(var(--color-surface));
    border-top: 2px solid rgb(var(--color-border));
    @apply p-4 pb-safe;
    @apply flex items-center justify-center gap-4;
    @apply z-50;
  }

  /* Safe area padding for notched devices */
  .pt-safe {
    padding-top: env(safe-area-inset-top, 0px);
  }

  .pb-safe {
    padding-bottom: env(safe-area-inset-bottom, 0px);
  }

  .pl-safe {
    padding-left: env(safe-area-inset-left, 0px);
  }

  .pr-safe {
    padding-right: env(safe-area-inset-right, 0px);
  }

  /* Thumb-friendly zone indicator (bottom of screen) */
  .thumb-zone {
    @apply fixed bottom-0 left-0 right-0;
    @apply h-[200px];
    @apply pointer-events-none;
  }

  /* Mobile-optimized grid */
  .grid-mobile {
    @apply grid grid-cols-1 gap-4;
    @apply sm:grid-cols-2 lg:grid-cols-3;
  }

  /* Floating action button */
  .fab {
    @apply fixed bottom-6 right-6;
    @apply w-16 h-16 rounded-full;
    background-color: rgb(var(--color-accent));
    @apply text-white;
    border: 2px solid rgb(var(--color-border));
    box-shadow: var(--shadow-lg);
    @apply flex items-center justify-center;
    @apply active:scale-95 transition-transform;
    @apply z-40;
  }

  .fab-with-bar {
    @apply bottom-24;
  }
}

@layer utilities {
  /* Animation utilities */
  .animate-bounce-slow {
    animation: bounce 2s infinite;
  }

  /* Retro shadow variations — variable-based */
  .shadow-retro-red {
    box-shadow: 0 2px 8px -1px rgb(var(--color-retro-red) / 0.3);
  }

  .shadow-retro-teal {
    box-shadow: 0 2px 8px -1px rgb(var(--color-retro-teal) / 0.3);
  }

  .shadow-retro-navy {
    box-shadow: 0 2px 8px -1px rgb(var(--color-retro-navy) / 0.3);
  }

  /* Gradient text */
  .text-gradient-retro {
    @apply bg-gradient-to-r from-retro-red via-retro-mustard to-retro-teal;
    @apply bg-clip-text text-transparent;
  }

  /* Hover lift effect */
  .hover-lift {
    @apply transition-transform duration-200;
    @apply hover:-translate-y-1;
  }
}

/* Disabled button cursor */
button:disabled,
button[disabled] {
  cursor: not-allowed;
  @apply opacity-60;
}

/* Scrollbar styling */
::-webkit-scrollbar {
  width: 10px;
}

::-webkit-scrollbar-track {
  background-color: rgb(var(--color-scrollbar-track));
}

::-webkit-scrollbar-thumb {
  background-color: rgb(var(--color-scrollbar-thumb));
  border-radius: var(--radius-sm);
}

::-webkit-scrollbar-thumb:hover {
  background-color: rgb(var(--color-secondary));
}

/* Selection styling */
::selection {
  background-color: rgb(var(--color-accent));
  color: white;
}

/* Focus-visible accessibility */
:focus-visible {
  outline: 2px solid rgb(var(--color-accent));
  outline-offset: 2px;
  border-radius: var(--radius-sm);
}

/* Mobile-specific media queries */
@media (max-width: 640px) {
  .heading-retro {
    @apply text-3xl;
  }

  .card-retro {
    @apply p-4;
  }

  .btn-retro {
    @apply w-full justify-center;
  }

  .form-group-mobile {
    @apply flex flex-col gap-2;
  }

  input[type="checkbox"],
  input[type="radio"] {
    @apply w-6 h-6;
  }

  .list-touch li {
    @apply py-3;
    border-bottom: 1px solid rgb(var(--color-border-muted));
  }
}

/* Tachometer loading animation utilities */
.tach-needle {
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.tach-redline {
  animation: tach-glow 1.5s ease-in-out infinite;
}

/* Easy Button breathing glow */
@keyframes easy-pulse {
  0%, 100% { box-shadow: 0 0 0 8px #1f2937, 0 0 30px rgba(239, 68, 68, 0.2); }
  50% { box-shadow: 0 0 0 8px #1f2937, 0 0 60px rgba(239, 68, 68, 0.5), 0 0 100px rgba(239, 68, 68, 0.2); }
}
.easy-button-pulse {
  animation: easy-pulse 2s ease-in-out infinite;
}

/* Reduce motion for users who prefer it */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .card-retro {
    border-width: 3px;
  }

  .btn-retro {
    border-width: 3px;
  }

  .input-retro {
    border-width: 3px;
  }
}
